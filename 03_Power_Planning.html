<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power Planning | PD Blog</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1><a href="index.html">ğŸ”§ Physical Design Blog</a></h1>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="02_Floorplanning.html">â† Prev</a>
                <a href="04_Placement.html">Next â†’</a>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="article-header">
            <span class="article-number">Part 3 of 10</span>
            <h1>Power Planning</h1>
            <p class="subtitle">Building a robust power distribution network</p>
            <p class="author">By <strong>Praveen Kumar Vagala</strong></p>
            <div class="view-counter">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                <span class="view-count">1,039</span> views
            </div>
        </div>

        <h2>Why Power Planning Matters</h2>
        <p>Power must reach every cell with minimal voltage drop (IR drop).</p>

<div class="diagram">      VDD at pad = 1.0V
            â”‚
            â”‚ Wire resistance
            â–¼
      VDD at cell = 0.95V   â† 5% drop = 50mV!

If IR drop too high:
  â€¢ Cells run slower (setup violations)
  â€¢ May cause functional failures
  â€¢ Reliability issues</div>

        <h2>Power Network Structure</h2>

<div class="diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â† Ring    â”‚
â”‚  â•‘                                                  â•‘  (VDD)    â”‚
â”‚  â•‘   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â•‘            â”‚
â”‚  â•‘   â•‘                                         â•‘   â•‘  â† Ring    â”‚
â”‚  â•‘   â•‘  â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â•‘   â•‘    (VSS)    â”‚
â”‚  â•‘   â•‘  â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â•‘   â•‘            â”‚
â”‚  â•‘   â•‘  â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â•‘   â•‘  â† Straps   â”‚
â”‚  â•‘   â•‘  â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â•‘   â•‘    (vertical)â”‚
â”‚  â•‘   â•‘  â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â”ƒ   â•‘   â•‘            â”‚
â”‚  â•‘   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â•‘  â† Straps   â”‚
â”‚  â•‘                                               â•‘    (horiz)  â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•              â”‚
â”‚                                                                  â”‚
â”‚  â”€â”€VDDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â† Rails      â”‚
â”‚  â”€â”€VSSâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    (in rows)   â”‚
â”‚  â”€â”€VDDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

        <h2>Power Network Components</h2>
        <table>
            <tr><th>Component</th><th>Layer</th><th>Purpose</th></tr>
            <tr><td>Power Ring</td><td>Top metals</td><td>Distribute power around chip</td></tr>
            <tr><td>Power Straps</td><td>Upper metals</td><td>Carry power across chip</td></tr>
            <tr><td>Power Rails</td><td>M1</td><td>Supply power to standard cells</td></tr>
            <tr><td>Vias</td><td>Between layers</td><td>Connect different metal layers</td></tr>
        </table>

        <h2>Power Ring</h2>
        <p>Forms a ring around the core area on thick top metals.</p>

<pre><code># Create power ring (Innovus)
addRing \
  -nets {VDD VSS} \
  -type core_rings \
  -layer {top M9 bottom M9 left M8 right M8} \
  -width 5 \
  -spacing 2 \
  -offset 3</code></pre>

        <h2>Power Straps</h2>
        <p>Vertical and horizontal metal lines that carry power from ring to cells.</p>

<pre><code># Add power straps (Innovus)
addStripe \
  -nets {VDD VSS} \
  -layer M6 \
  -direction vertical \
  -width 2 \
  -spacing 1 \
  -set_to_set_distance 50 \
  -start_from left \
  -start_offset 10

# Horizontal straps
addStripe \
  -nets {VDD VSS} \
  -layer M7 \
  -direction horizontal \
  -width 2 \
  -spacing 1 \
  -set_to_set_distance 50</code></pre>

        <h2>Via Stacking</h2>
<div class="diagram">            Power Pad
                â”‚
        â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•  M9 (Ring)
                â”‚
        â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€  M8
                â”‚
        â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•  M7 (Strap)
                â”‚
        â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€  M6
                â”‚
        â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•  M5 (Strap)
                â”‚
            ... â”‚ ...
                â”‚
        â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€  M1 (Rail)
                â”‚
              Cells
              
Via stack connects all layers!</div>

        <h2>Standard Cell Rails</h2>
        <p>Horizontal M1 rails in each row supply cells directly.</p>

<div class="diagram">Row 2:  â”€â”€VDDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
        â”‚ INV â”‚ â”‚ BUF â”‚ â”‚  AND  â”‚ â”‚ MUX â”‚
        â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜
        â”€â”€VSSâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Row 1:  â”€â”€VDDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
        â”‚ OR  â”‚ â”‚  NOR  â”‚ â”‚ XOR â”‚
        â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜
        â”€â”€VSSâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</div>

        <h2>IR Drop</h2>
        <p><strong>IR Drop = Current Ã— Resistance</strong></p>

<div class="diagram">                 VDD = 1.0V
                    â”‚
            R1=10mÎ© â”‚
                    â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    0.99V      â”‚
            â”‚               â”‚
       R2   â”‚          R3   â”‚
            â–¼               â–¼
         0.97V           0.98V
         
Cells far from power pads see lower voltage!</div>

        <h3>IR Drop Guidelines</h3>
        <ul>
            <li>Static IR drop: < 5% of VDD (typical target)</li>
            <li>Dynamic IR drop: < 10% during switching</li>
            <li>Increase strap width/count to reduce IR drop</li>
        </ul>

        <h2>Electromigration (EM)</h2>
        <p>High current density causes metal atoms to move, eventually breaking wires.</p>

        <div class="warning">
            <strong>EM Limits:</strong><br>
            Each metal layer has maximum current density (mA/um).<br>
            Power straps must be wide enough to stay under limits!
        </div>

<pre><code>Current density = Total current / Wire cross-section

If current = 100mA and wire width = 2um, thickness = 0.5um:
  Density = 100mA / (2 Ã— 0.5) = 100 mA/umÂ²
  
Check against library EM limits!</code></pre>

        <h2>Macro Power Connections</h2>
        <p>Macros have their own power pins that must connect to the grid.</p>

<div class="diagram">    Power Strap (M6)
         â”‚
    â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    VDD pin              â”‚
    â”‚                         â”‚
    â”‚       MACRO             â”‚
    â”‚       (SRAM)            â”‚
    â”‚                         â”‚
    â”‚    VSS pin              â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â”‚
    Power Strap (M6)</div>

        <h2>Power Mesh Density</h2>
        <table>
            <tr><th>Block Type</th><th>Power Mesh</th><th>Reason</th></tr>
            <tr><td>High-speed logic</td><td>Dense mesh</td><td>High switching current</td></tr>
            <tr><td>Memory blocks</td><td>Dense mesh</td><td>Many cells switching</td></tr>
            <tr><td>Low-power logic</td><td>Sparse mesh</td><td>Lower current</td></tr>
            <tr><td>Clock buffers</td><td>Dense mesh</td><td>High switching</td></tr>
        </table>

        <h2>Commands Summary (Innovus)</h2>
<pre><code># Power planning flow
globalNetConnect VDD -type pgpin -pin VDD -all
globalNetConnect VSS -type pgpin -pin VSS -all

# Create ring
addRing -nets {VDD VSS} -type core_rings ...

# Create straps
addStripe -nets {VDD VSS} -layer M6 ...

# Special route (connect rails to straps)
sroute -connect corePin

# Verify
verifyConnectivity -nets {VDD VSS}
analyzeIRDrop</code></pre>

        <div class="summary">
            <h3>Summary</h3>
            <table>
                <tr><th>Component</th><th>Key Point</th></tr>
                <tr><td>Power Ring</td><td>Around core on top metals</td></tr>
                <tr><td>Power Straps</td><td>Carry power across chip</td></tr>
                <tr><td>Power Rails</td><td>M1 rails to cells</td></tr>
                <tr><td>IR Drop</td><td>Keep < 5% of VDD</td></tr>
                <tr><td>EM</td><td>Stay under current limits</td></tr>
            </table>
        </div>

        <div class="nav-buttons">
            <a href="02_Floorplanning.html" class="nav-btn prev">â† Floorplanning</a>
            <a href="04_Placement.html" class="nav-btn next">Placement â†’</a>
        </div>
    </div>
    
    <div class="footer">
        <p>Physical Design Blog Series | Part 3 of 10</p>
    </div>
</body>
</html>
