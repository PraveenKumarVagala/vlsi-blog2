<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Placement | PD Blog</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1><a href="index.html">ğŸ”§ Physical Design Blog</a></h1>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="03_Power_Planning.html">â† Prev</a>
                <a href="05_Clock_Tree_Synthesis.html">Next â†’</a>
            </div>
        </div>
    </div>
    
    <div class="container">
        <div class="article-header">
            <span class="article-number">Part 4 of 10</span>
            <h1>Placement</h1>
            <p class="subtitle">Positioning standard cells for optimal timing and routability</p>
            <p class="author">By <strong>Praveen Kumar Vagala</strong></p>
            <div class="view-counter">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                <span class="view-count">1,112</span> views
            </div>
        </div>

        <h2>What is Placement?</h2>
        <p>Placement determines where each standard cell sits in the chip.</p>

<div class="diagram">Before Placement:           After Placement:
                            
  A bunch of cells          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  floating around           â”‚ INV BUF AND MUX OR XOR  â”‚
      â—‹ â—‹ â—‹                 â”‚ NOR NAND BUF FF FF     â”‚
    â—‹   â—‹   â—‹               â”‚ AND AND OR  MUX BUF   â”‚
      â—‹ â—‹ â—‹                 â”‚ FF  INV XOR AND NOR   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            
                            Cells in rows, legal positions</div>

        <h2>Placement Stages</h2>

<div class="diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. GLOBAL PLACEMENT                                          â”‚
â”‚    â€¢ Rough placement of all cells                           â”‚
â”‚    â€¢ Cells may overlap                                      â”‚
â”‚    â€¢ Minimize total wire length                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. LEGALIZATION                                              â”‚
â”‚    â€¢ Remove overlaps                                        â”‚
â”‚    â€¢ Snap cells to legal row positions                      â”‚
â”‚    â€¢ Align to placement grid                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. DETAILED PLACEMENT                                        â”‚
â”‚    â€¢ Fine-tune positions                                    â”‚
â”‚    â€¢ Optimize for timing                                    â”‚
â”‚    â€¢ Reduce local congestion                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

        <h2>Placement Objectives</h2>
        <table>
            <tr><th>Objective</th><th>Why</th></tr>
            <tr><td>Minimize wire length</td><td>Shorter wires = faster signals, less power</td></tr>
            <tr><td>Meet timing</td><td>Critical paths get priority</td></tr>
            <tr><td>Reduce congestion</td><td>Ensure routing is possible</td></tr>
            <tr><td>Balance density</td><td>Even utilization across chip</td></tr>
        </table>

        <h2>Cell Rows</h2>
        <p>Standard cells are placed in horizontal rows.</p>

<div class="diagram">    Row 4:  â”€â”€VDDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”
            â”‚   â”‚â”‚   â”‚â”‚     â”‚â”‚   â”‚â”‚   â”‚â”‚   â”‚
            â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜
            â”€â”€VSSâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            
    Row 3:  â”€â”€VDDâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”
            â”‚   â”‚â”‚       â”‚â”‚   â”‚â”‚   â”‚â”‚   â”‚
            â””â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜
            â”€â”€VSSâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
            
    Cells have fixed height, variable width
    Rows alternate orientation (N, FS, N, FS...)
    VDD/VSS rails shared between adjacent rows</div>

        <h2>Placement Constraints</h2>

        <h3>Placement Blockages</h3>
<pre><code># Hard blockage - no cells allowed
createPlaceBlockage -type hard -box {100 100 200 200}

# Soft blockage - cells allowed if needed
createPlaceBlockage -type soft -box {300 100 400 200}

# Partial blockage - reduced density
createPlaceBlockage -type partial -box {500 100 600 200} -density 50</code></pre>

        <h3>Cell Groups and Regions</h3>
<pre><code># Group related cells together
createInstGroup critical_group -cells {U1 U2 U3 U4}

# Create region and assign group
createRegion region1 100 100 300 300
assignInstGroup region1 critical_group

# Fence - cells MUST be in region
createFence fence1 -box {100 100 300 300}
addInstToFence fence1 {U1 U2 U3}</code></pre>

        <h2>Timing-Driven Placement</h2>
        <p>Critical paths get priority during placement.</p>

<div class="diagram">Timing-driven placement:

       â”Œâ”€â”€â”€â”     Short wire!      â”Œâ”€â”€â”€â”
       â”‚FF1â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–º â”‚FF2â”‚
       â””â”€â”€â”€â”˜  Critical path       â””â”€â”€â”€â”˜
       
       â”Œâ”€â”€â”€â”                           â”Œâ”€â”€â”€â”
       â”‚FF3â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚FF4â”‚
       â””â”€â”€â”€â”˜   Non-critical (longer)   â””â”€â”€â”€â”˜

Tools analyze timing and place critical cells closer.</div>

        <h2>Congestion</h2>
        <p>Too many wires in one area = routing problems.</p>

<div class="diagram">Low Congestion:          High Congestion:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   â”‚    â”‚    â•”â•â•¦â•â•¦â•â•¦â•â•—      â”‚
â”‚  â”€â”€â”€ â”€â”€â”€ â”€â”€â”€     â”‚    â”‚    â•‘ â•‘ â•‘ â•‘ â•‘      â”‚
â”‚      â”€â”€â”€ â”€â”€â”€     â”‚    â”‚    â• â•â•¬â•â•¬â•â•¬â•â•£      â”‚
â”‚  â”€â”€â”€ â”€â”€â”€ â”€â”€â”€     â”‚    â”‚    â•‘ â•‘ â•‘ â•‘ â•‘      â”‚
â”‚                   â”‚    â”‚    â•šâ•â•©â•â•©â•â•©â•â•      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         
Good: Wires spread out   Bad: Too many wires!
                         May not route!</div>

        <h3>Congestion Fixes</h3>
        <ul>
            <li>Reduce utilization in congested areas</li>
            <li>Add placement blockages</li>
            <li>Spread cells using density screens</li>
            <li>Use congestion-driven placement mode</li>
        </ul>

        <h2>Optimization During Placement</h2>
        <table>
            <tr><th>Optimization</th><th>What It Does</th></tr>
            <tr><td>Buffer insertion</td><td>Add buffers for long wires</td></tr>
            <tr><td>Gate sizing</td><td>Upsize cells on critical paths</td></tr>
            <tr><td>Cell swapping</td><td>Replace cells with better variants</td></tr>
            <tr><td>Cloning</td><td>Duplicate high-fanout drivers</td></tr>
        </table>

        <h2>Scan Chain Reordering</h2>
        <p>DFT scan chains should follow placement order to reduce wire length.</p>

<div class="diagram">Before reorder:              After reorder:
                             
  1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              1 â”€â–º 2 â”€â–º 3
              â”‚                        â”‚
  3 â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              4 â—„â”€ 5 â—„â”€â”˜
              â”‚                  â”‚
  2 â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              6 â—„â”€â”˜
  
Long wires crossing!         Short local connections</div>

        <h2>Placement Commands (Innovus)</h2>
<pre><code># Set placement mode
setPlaceMode -timingDriven true
setPlaceMode -congestionEffort high

# Run placement
place_design

# Or step by step:
place_opt_design -global    # Global placement
place_opt_design -detail    # Detailed placement

# Check placement
checkPlace
reportCongestion

# Optimize after placement
optDesign -preCTS</code></pre>

        <h2>Placement Quality Metrics</h2>
        <table>
            <tr><th>Metric</th><th>Good Value</th></tr>
            <tr><td>Total WNS (setup)</td><td>Positive or small negative</td></tr>
            <tr><td>Total TNS</td><td>Close to 0</td></tr>
            <tr><td>Max congestion</td><td>< 1.0 (no overflow)</td></tr>
            <tr><td>Utilization</td><td>Within 5% of target</td></tr>
            <tr><td>HPWL</td><td>Minimize (wire length)</td></tr>
        </table>

        <div class="summary">
            <h3>Summary</h3>
            <table>
                <tr><th>Stage</th><th>Key Point</th></tr>
                <tr><td>Global</td><td>Initial rough placement</td></tr>
                <tr><td>Legalization</td><td>Remove overlaps, align to rows</td></tr>
                <tr><td>Detailed</td><td>Fine-tune for timing</td></tr>
                <tr><td>Timing-driven</td><td>Critical paths placed closer</td></tr>
                <tr><td>Congestion</td><td>Avoid routing hotspots</td></tr>
            </table>
        </div>

        <div class="nav-buttons">
            <a href="03_Power_Planning.html" class="nav-btn prev">â† Power Planning</a>
            <a href="05_Clock_Tree_Synthesis.html" class="nav-btn next">Clock Tree Synthesis â†’</a>
        </div>
    </div>
    
    <div class="footer">
        <p>Physical Design Blog Series | Part 4 of 10</p>
    </div>
</body>
</html>
